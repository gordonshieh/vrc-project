services:
  - mysql:latest

variables:
  MYSQL_DATABASE: test
  MYSQL_ROOT_PASSWORD: b3ta

before_script:
  - export GRADLE_USER_HOME=`pwd`/.gradle

stages:
  - build
  - test
  - jshint

build:
  script: gradle assemble
  stage: build

test:
  script: gradle check
  stage: test

jshint:
  script:
    - cd web
    - npm install
    - grunt jshint
  stage: jshint
